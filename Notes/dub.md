### DUB

DUB - официальный менеджер пакетов языка D. Он обеспечивает простоту сборки программ и пакетов на всех поддерживаемых платформах. Кроме того, DUB может генерировать файлы пакетов для VisualD и Mono-D.

Файл проекта `dub.json` выглядит так:

```json
{
	"name": "myproject",
	"authors": [
		"My Name"
	],
	"description": "My first project",
	"copyright": "Copyright © 2017, imadev",
	"license": "Boost"
}
```

#### Команды

**init** \[\<directory\> \[\<dependency\>...\]\] \[\<options...\>\]

Создаёт скелет пакета.

| Опция | Альтернатива       | Значение
|-------|--------------------|---------
| -t    | --type=\<value\>   | Устанавливает тип проекта. (см. ниже) 
| -f    | --format=\<value\> | Устанавливает формат проекта (json или sdl).
| -n    | --non-interactive  | Не задаёт вопросов.

Типы проектов:

* **minimal** - простой "Hello World" (по умолчанию);
* **vibe.d** - минимальный сервер HTTP, основанный на vibe.d;
* **deimos** - скелет для C-биндинга;
* **cusom** - кастомный проект. 
 
**run** \[\<package\>\] \[\<options...\>\]
      
Запускает пакет. При необходимости сначала компилирует его. Команда по умолчанию (т. е. применяется, если команда не задана).

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --temp-build         | Собирает пакет во временной папке, если это возможно.
|       | --rdmd               | Использовать `rdmd`, а не компилятор.
| -f    | --force              | Принудительная перекомпиляция.
| -y    | --yes                | Ответ "да" на все вопросы (неинтерактивный запуск).
| -b    | --build=\<value\>    | Тип сборки (см. ниже).
| -c    | --config=\<value\>   | Сборка указанной конфигурации. Конфигурации задаются в `dub.json`.
|       | --override-config=\<value\> | Использовать указанную конфигурацию для конкретной зависимости (опция может быть задана несколько раз).
|       | --compiler=\<value\> | Использовать компилятор: `dmd`, `gdc`, `ldc`, `gdmd`, `ldmd`. Также можно указывать суффиксы (например, `ldc2` или `dmd-2.063`).
| -a    | --arch=\<value\>     | Явное указание архитектуры (например, `x86` или `x86_64`).
| -d    | --debug=\<value\>    | Определение идентификатора отладочной сборки (опция может быть задана несколько раз).
|       | --nodeps             | Не разрешать зависимости перед сборкой.
|       | --build-mode=\<value\> | Задаёт способ вызова компилятора и линкёра. Значения: `separate` (по умолчанию), `allAtOnce` и `singleFile`.
|       | --single             | Пакет из одного файла (см. ниже)
|       | --force-remove       | Устаревшая опция, ничего не делает.
|       | --filter-versions    | Экспериментальная опция. Фильтрует идентификаторы версии и идентификаторы отладки для улучшения использования кеша при сборке.
|       | --combined           | Пытается собрать весь проект за один вызов компилятора.
|       | --print-builds       | Распечатывает список всех доступных типов сборки.
|       | --print-configs      | Распечатывает список всех доступных конфигураций.
|       | --print-platform     | Распечатывает идентификаторы платформ, перечисленные в `dub.json`.
|       | --parallel           | Параллельная компиляция, если возможно.

Пакет из одного файла, запускаемый опцией `--single`, выглядит так:

```
#!/usr/bin/env dub
/+ dub.sdl:
	name "hello"
+/
void main() {
	import std.stdio : writeln;
	writeln("Hello, World!");
}
```

Типы сборки:

* debug (по умолчанию);
* plain;
* release;
* release-debug;
* release-nobounds;
* unittest;
* profile;
* profile-gc;
* docs;
* ddox;
* cov;
* unittest-cov;
* syntax;
* custom.

**build** \[\<package\>\] \[\<options...\>\]
     
Компилирует пакет (по умолчанию использует пакет `main` в текущей папке).

Опции см. команду `run`, кроме `--build-temp` (отсутствует).

**test** \[\<package\>\] \[\<options...\>\]
      
Запускает юнит-тестирование указанного пакета. При необходимости сначала компилирует его.

Опции см. команду `run`, кроме `--build-temp` (отсутствует).

**generate** \<generator\> \[\<package\>\] \[\<options...\>\]

Создаёт проектные файлы, используя указанный генератор.

| Генератор   | Назначение
|-------------|-----------
| visuald     | Файл проекта для Visual D
| sublimetext | Файл проекта для Sublime Text
| cmake       | Скрипт для CMake
| build       | Прямая сборка пакета

Опции см. команду `run`, кроме `--build-temp` (отсутствует).

**describe** \[\<package\>\]  

Печатает JSON-описание проекта и его зависимостей.

**clean** \[\<package\>\]
     
Удаляет временные файлы и кешированные результаты сборки.

**dustmite** \<destination-path\>
                        
Создаёт упрощённые тесты для ошибок сборки.                                                

**fetch** \<name\>\[@<\version-spec\>\] \[\<options...\>\]

Скачивает и кеширует указанный пакет.

**add** \<package\>\[@\<version-spec\>\] \[\<packages...\>\]

Добавляет зависимости пакета.

**remove** \<name\> \[\<options...\>\]

Удаляет кешированный пакет.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --version=\<value\>  | Использовать указанную версию/бранч вместо последней. Также принимается версия `*`, означающая все версии указанного пакета.
|       | --force-remove       | Устаревшая опция, ничего не делает.
| -n    | --non-interactive    | Не задавать вопросов.

**upgrade** \[\<packages...\>\] \[\<options...\>\]

Принудительно обновляет зависимости.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --prerelease         | Использовать последнюю предрелизную версию, даже если доступна релизная версия.
|       | --verify             | Обновить проект и выполнить сборку. При удачной сборке, переписать выбранные версии \<to be implemented\>.
|       | --dry-run            | Выводится список подлежащих обновлению пакетов, реального обновления не производится.
|       | --missing-only       | Обновить только те зависимости, у которых не указана версия. Это автоматически проделывается перед каждой сборкой.
|       | --force-remove       | Устаревшая опция, ничего не делает.

**add-path** \<path\> \[\<options...\>\]
       
Добавляет путь поиска пакетов.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --system             | Для системы в целом, а не для текущего пользователя.

**remove-path** \<path\> \[\<options...\>\]

Удаляет путь поиска пакетов.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --system             | Для системы в целом, а не для текущего пользователя.
  
**add-local** \<path\> \[\<version\>\] \[\<options...\>\]

Добавляет локальную папку пакета (например, репозиторий git).

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --system             | Для системы в целом, а не для текущего пользователя.

**remove-local** \<path\> \[\<options...\>\]

Удаляет локальную папку пакета.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --system             | Для системы в целом, а не для текущего пользователя.

**list**

Печатает список всех известных dub локальных пакетов.
  
**search** \<query\>        

Поиск доступных пакетов.

**add-override** \<package\> \<version-spec\> \<target-path/target-version\> \[\<options...\>\]

Добавляет переопредление пакета.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --system             | Для системы в целом, а не для текущего пользователя.
  
**remove-override** \<package\> \<version-spec\> \[\<options...\>\]

Удаляет переопредление пакета.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
|       | --system             | Для системы в целом, а не для текущего пользователя.
  
**list-overrides**
        
Печатает список всех переопределений локальных пакетов.

**clean-caches**
          
Удаляет кешированные метаданные.
  
**convert** \[\<options...\>\]
               
Конвертирует формат файла пакета.

| Опция | Альтернатива         | Значение
|-------|----------------------|---------
| -f    | --format=\<value\>   | Формат: `json` или `sdl`.
| -s    | --stdout             | Вывод в стандартный выходной поток вместо файла.